Here are **clean, exam-/revision-friendly notes** for the concepts we discussed ğŸ‘‡
(Simple language, short points)

---

# ğŸ“˜ Express.js Middleware & `app.use()` â€” Notes

---

## ğŸ”¹ What is Middleware?

* Middleware is **code that runs between request and response**
* It executes **before route handlers**
* It can:

  * Allow request
  * Modify request/response
  * Block request

### Definition:

> Middleware is a function that has access to `req`, `res`, and `next`

---

## ğŸ”¹ Middleware Function Syntax

```js
(req, res, next) => {
  // logic
  next();
}
```

### Parameters:

* `req` â†’ request object
* `res` â†’ response object
* `next()` â†’ passes control to next middleware/route

âš ï¸ If `next()` is not called and no response is sent â†’ request hangs

---

## ğŸ”¹ Types of Middleware

1. **Application-level middleware**
2. **Route-level middleware**
3. **Built-in middleware**
4. **Error-handling middleware**

---

## ğŸ”¹ Common Uses of Middleware

* Authentication & Authorization ğŸ”
* Logging requests ğŸ“
* Parsing request body
* Validation
* Error handling

---

## ğŸ”¹ Creating Custom Middleware (Example)

```js
function logger(req, res, next) {
  console.log(req.url);
  next();
}
```

---

## ğŸ”¹ What is `app.use()`?

> `app.use()` is used to **register middleware** in Express.

* Runs for **every HTTP method**
* Runs for **every request** (unless path is specified)

---

## ğŸ”¹ Basic Syntax of `app.use()`

```js
app.use(middleware);
```

or

```js
app.use("/path", middleware);
```

---

## ğŸ”¹ `app.use()` Examples

### Runs for all requests

```js
app.use((req, res, next) => {
  console.log("Request received");
  next();
});
```

### Runs only for `/api` routes

```js
app.use("/api", middleware);
```

---

## ğŸ”¹ Built-in Middleware Examples

```js
app.use(express.json());              // parse JSON body
app.use(express.urlencoded({ extended: true })); // parse form data
app.use(express.static("public"));    // serve static files
```

---

## ğŸ”¹ Route vs `app.use()`

| Feature      | `app.use()`  | `app.get()`    |
| ------------ | ------------ | -------------- |
| HTTP methods | ALL          | GET only       |
| Purpose      | Middleware   | Route handling |
| Path match   | Prefix-based | Exact match    |

---

## ğŸ”¹ Applying Middleware to a Route

```js
app.get("/profile", authMiddleware, (req, res) => {
  res.send("Profile page");
});
```

---

## ğŸ”¹ Middleware Execution Order

* Middleware runs **top to bottom**
* Order matters âš ï¸

```js
app.use(m1);
app.use(m2);
```

â¡ `m1` runs before `m2`

---

## ğŸ”¹ Error-handling Middleware

* Has **4 parameters**

```js
function errorHandler(err, req, res, next) {
  res.status(500).send("Error occurred");
}
```

* Must be defined **after routes**

```js
app.use(errorHandler);
```

---

## ğŸ”¹ Important Rules to Remember ğŸ§ 

âœ” Middleware runs in order
âœ” Call `next()` to continue
âœ” Send response OR call `next()`
âœ” Error middleware goes last
âœ” `app.use()` runs for all HTTP methods

---

## ğŸ”¹ One-Line Summaries

* **Middleware** â†’ Request checkpoint
* **`next()`** â†’ Move forward
* **`app.use()`** â†’ Register middleware globally or by path

